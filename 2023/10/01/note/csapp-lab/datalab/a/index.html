<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head><!-- hexo injector head_begin start --><script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- hexo injector head_begin end -->

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="CSAPP Data Lab åšé¢˜è®°å½•ï¼ˆä¸Šï¼‰å‡†å¤‡å·¥ä½œè®¿é—® http://csapp.cs.cmu.edu/3e/labs.html è¯•å›¾ä¸‹è½½ç½‘é¡µä¸Šé†’ç›®çš„ datalab.tarï¼Œå‘ç°éœ€è¦èº«ä»½éªŒè¯ã€‚åæ¥å‘ç°ç‚¹åé¢çš„å°ä¸œè¥¿å¯ä»¥ç›´æ¥ä¸‹è½½ã€‚è¯»äº† readme ä¹‹åçŸ¥é“ datalab.tar å¥½åƒæ˜¯æ•™å¸ˆç”¨çš„">
    

    <!--Author-->
    
        <meta name="author" content="jyi2ya">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="CSAPP Data Lab åšé¢˜è®°å½•ï¼ˆä¸Šï¼‰"/>
    

    <!--Open Graph Description-->
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="Hexo"/>

    <!--Type page-->
    
        <meta property="og:type" content="article" />
    

    <!--Page Cover for sharing-->
    
        <meta property="og:image" content="https://iâ¤ï¸.ws/emoji-image/ğŸ¦„.png" />
    

    <!-- Page permalink -->
    
        <meta property="og:url" content="https://jyi2ya.github.io/2023/10/01/note/csapp-lab/datalab/a/" />
    

    <meta name="twitter:card" content="summary" />
    
        <meta name="twitter:site" content="@johndoe" />
    

    <meta name="generator" content="Hexo" />

    <!-- Title -->
    
    <title>CSAPP Data Lab åšé¢˜è®°å½•ï¼ˆä¸Šï¼‰ - Hexo</title>

    <!-- Custom CSS -->
    
<link rel="stylesheet" href="/css/style.css">


<link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
</head>


<body class="sans-serif">

<!-- Main Content -->
<!-- Banner -->
<!-- Banner -->
<header class="w-100 bg-1 ph5-ns ph3 text-light">

    <nav class="db w-100 mw8 center border-box pv3">
        <div class="db v-mid w-100 tc tr-ns">
            
            
        </div>
    </nav>

    <div class="w-100 tc db dt-ns">
        <!-- Title -->
        <div class="dib dtc-ns w-90-ns white">
            <h1 class="f1-ns tc tc-ns tl-ns">CSAPP Data Lab åšé¢˜è®°å½•ï¼ˆä¸Šï¼‰</h1>
        </div>
        <!-- Icon -->
        <div class="dib dtc-ns w-10-ns f1 f-5-ns f-6-l mb2">
            <span class="ec">ğŸ§™</span>
        </div>
    </div>
    
</header>


<!-- Content -->
<div class="w-100 ph2 ph4-m ph5-l mv5">
    <div class="content">
        <div class="mw8 center">
            <div class="cf">
                <div class="fl w-100 mw7 left lh-copy pr4-ns pr0-m post-content">

                    <!-- Main Post Content -->
                    <h1 id="CSAPP-Data-Lab-åšé¢˜è®°å½•ï¼ˆä¸Šï¼‰"><a href="#CSAPP-Data-Lab-åšé¢˜è®°å½•ï¼ˆä¸Šï¼‰" class="headerlink" title="CSAPP Data Lab åšé¢˜è®°å½•ï¼ˆä¸Šï¼‰"></a>CSAPP Data Lab åšé¢˜è®°å½•ï¼ˆä¸Šï¼‰</h1><h2 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h2><p>è®¿é—® <a target="_blank" rel="noopener" href="http://csapp.cs.cmu.edu/3e/labs.html">http://csapp.cs.cmu.edu/3e/labs.html</a> è¯•å›¾ä¸‹è½½ç½‘é¡µä¸Šé†’ç›®çš„ datalab.tarï¼Œå‘ç°éœ€è¦èº«ä»½éªŒè¯ã€‚åæ¥å‘ç°ç‚¹åé¢çš„å°ä¸œè¥¿å¯ä»¥ç›´æ¥ä¸‹è½½ã€‚è¯»äº† readme ä¹‹åçŸ¥é“ datalab.tar å¥½åƒæ˜¯æ•™å¸ˆç”¨çš„ï¼Œç”¨æ¥ç”Ÿæˆå­¦ç”Ÿçš„åŒ…ï¼ˆdatalab-handoutï¼‰ï¼Œdatalab-handout æ‰æ˜¯å­¦ç”Ÿç”¨çš„ã€‚</p>
<p><img src="/datalab-webpage.png" alt="datalab çš„ç¥ç§˜é“¾æ¥"></p>
<p>è¯»æ–‡æ¡£ï¼ŒçŸ¥é“å®éªŒæ˜¯è¦ç”¨ä½è¿ç®—æ¥æ¨¡æ‹Ÿå„ç§æ•´æ•°è¿ç®—ï¼Œè¿˜è¦ç”¨æ•´æ•°è¿ç®—æ¨¡æ‹Ÿæµ®ç‚¹è¿ç®—ã€‚å¥½åƒè¯„æµ‹è¿˜å®ç°äº†ä¸€ä¸ªå°å·¥å…·æ¥æŸ¥æ˜¯å¦ç”¨åˆ°äº†è¿è§„çš„æ“ä½œç¬¦ã€‚</p>
<p>çœ‹æ–‡æ¡£ä¸Šè¯´éœ€è¦å®‰è£… bison å’Œ flexï¼Œä»¥ä¸ºæ£€æŸ¥è¿è§„å°å·¥å…·ä¹Ÿéœ€è¦ç¼–è¯‘ï¼Œæ­£æ‰“ç®—çœ‹ä¸€ä¸‹ä»£ç å‘ç°åŒ…é‡Œç›´æ¥å‘äº†ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ä¸‹æ¥â€¦â€¦</p>
<p>å‘ç°è¯„æµ‹ç¨‹åºæ˜¯ç”¨ Perl å†™çš„ï¼Œå¤è€ã€‚</p>
<p>Driverlab.pm é‡Œå¥½åƒæ‰‹å†™äº†ä¸€ä¸ª http å®¢æˆ·ç«¯ï¼Ÿçœ‹èµ·æ¥æ˜¯æé‚£ä¸ª Beat the Prof æ¯”èµ›çš„ï¼Œåº”è¯¥ä¸ç”¨ç®¡å®ƒã€‚</p>
<p>ä¾ç…§æ‰‹å†ŒæŒ‡ç¤ºï¼Œè¦å…ˆ make ä¸€ä¸‹æŠŠ btest ç»™ç¼–è¯‘å¥½ã€‚ç»“æœé‡åˆ°ç¥å¥‡é—®é¢˜ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">% 09:19:42 jyi@Syameimaru-Aya ~/s/c/d/c/d/datalab-handout</span><br><span class="line">0 make</span><br><span class="line">gcc -O -Wall -m32 -lm -o btest bits.c btest.c decl.c tests.c</span><br><span class="line">In file included from btest.c:16:</span><br><span class="line">/usr/include/stdio.h:27:10: fatal error: bits/libc-header-start.h: No such file or directory</span><br><span class="line">   27 | #include &lt;bits/libc-header-start.h&gt;</span><br><span class="line">      |          ^~~~~~~~~~~~~~~~~~~~~~~~~~</span><br><span class="line">compilation terminated.</span><br><span class="line">In file included from decl.c:1:</span><br><span class="line">/usr/include/stdio.h:27:10: fatal error: bits/libc-header-start.h: No such file or directory</span><br><span class="line">   27 | #include &lt;bits/libc-header-start.h&gt;</span><br><span class="line">      |          ^~~~~~~~~~~~~~~~~~~~~~~~~~</span><br><span class="line">compilation terminated.</span><br><span class="line">In file included from /usr/lib/gcc/x86_64-linux-gnu/10/include/limits.h:195,</span><br><span class="line">                 from /usr/lib/gcc/x86_64-linux-gnu/10/include/syslimits.h:7,</span><br><span class="line">                 from /usr/lib/gcc/x86_64-linux-gnu/10/include/limits.h:34,</span><br><span class="line">                 from tests.c:3:</span><br><span class="line">/usr/include/limits.h:26:10: fatal error: bits/libc-header-start.h: No such file or directory</span><br><span class="line">   26 | #include &lt;bits/libc-header-start.h&gt;</span><br><span class="line">      |          ^~~~~~~~~~~~~~~~~~~~~~~~~~</span><br><span class="line">compilation terminated.</span><br><span class="line">make: *** [Makefile:11: btest] Error 1</span><br></pre></td></tr></table></figure>

<p>æ£€æŸ¥äº†ä¸€å‘å‘ç°æ˜¯ makefile é‡ŒæŒ‡å®šäº† <code>-m32</code> ä½†æ˜¯æˆ‘æ²¡æœ‰ 32 ä½çš„åº“ï¼Œè£…äº†ä¸ª gcc-multilibã€‚è‡³äºä¸ºå•¥ä¸ç”¨ <code>-m64</code> ç¼–è¯‘â€¦â€¦å› ä¸ºé‚£é‡Œé¢è¯´ä»€ä¹ˆ â€œnot 64-bit safeâ€ï¼Œæ²¡å¤ªæ‡‚ã€‚</p>
<h2 id="é¢˜ç›®åˆ—è¡¨"><a href="#é¢˜ç›®åˆ—è¡¨" class="headerlink" title="é¢˜ç›®åˆ—è¡¨"></a>é¢˜ç›®åˆ—è¡¨</h2><h3 id="bitXor"><a href="#bitXor" class="headerlink" title="bitXor"></a>bitXor</h3><p>ç»™å®šä¸¤ä¸ªæ•°ï¼Œè¿”å›ä»–ä»¬çš„å¼‚æˆ–ã€‚</p>
<p>é¦–å…ˆç”±çœŸå€¼è¡¨å†™å‡ºæŠŠå¼‚æˆ–è¿ç®—å†™æˆæœ€å°é¡¹ä¹‹å’Œçš„å½¢å¼ï¼Œå°±æ˜¯ $X \oplus Y &#x3D; X\bar{Y} + \bar{X}Y$ã€‚ç„¶åè·‘è·‘å‘ç°é›¶åˆ†ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬æ²¡æœ‰ <code>|</code> å¯ä»¥ç”¨â€¦â€¦ç”¨å¾·æ‘©æ ¹å®šå¾‹ç”»ç”»æŸ¿å­å¾—åˆ° $\bar{\bar{X\bar{Y}}\bar{\bar{X}Y}}$ï¼Œé¿å¼€ <code>|</code>ï¼Œå°±èƒ½è¿‡äº†ã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">bitXor</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> ~(~(~x &amp; y) &amp; ~(x &amp; ~y));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="tmin"><a href="#tmin" class="headerlink" title="tmin"></a>tmin</h3><p>è¿”å›æœ€å°çš„æœ‰ç¬¦å·æ•´æ•°ã€‚</p>
<p>é¢˜ç›®å‡è®¾æœºå™¨ä½¿ç”¨è¡¥ç è¡¨ç¤ºæ³•ï¼Œæˆ‘ä»¬çŸ¥é“è¿™ä¸ªæ•°çš„ä½æ¨¡å¼åº”è¯¥é•¿å¾—æ¯”è¾ƒåƒ 1000â€¦000ã€‚é¢˜ç›®åˆå‡è®¾äº†æˆ‘ä»¬æœºå™¨ä¸Šçš„æ•´æ•°éƒ½æ˜¯ 32 ä½çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠ 1 å·¦ç§» 31 ä½è¿”å›å°±è¡Œäº†ã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">tmin</span><span class="params">(<span class="type">void</span>)</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">1</span> &lt;&lt; <span class="number">31</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="isTmax"><a href="#isTmax" class="headerlink" title="isTmax"></a>isTmax</h3><p>åˆ¤æ–­ç»™å®šçš„ x æ˜¯ä¸æ˜¯æœ€å¤§çš„æœ‰ç¬¦å·æ•´æ•°ã€‚</p>
<p>è€ƒè™‘åˆ°é¢˜ç›®å‡å®šæœºå™¨é‡‡ç”¨è¡¥ç è¡¨ç¤ºæ³•ï¼Œæœ€å¤§çš„æœ‰ç¬¦å·æ•´æ•° tmax çš„ä½æ¨¡å¼åº”è¯¥æ˜¯ 01111â€¦111ã€‚å¥½åƒæŠŠ tmin çš„ç»“æœå–åå°±æ˜¯äº†ï¼Œä½†æ˜¯ä»–æ²¡ç»™ <code>&lt;&lt;</code> æ“ä½œç¬¦ï¼Œé¢˜ç›®åˆç¦æ­¢ä½¿ç”¨è¶…è¿‡ 255 çš„æ•´æ•°ï¼Œæ‰€ä»¥ tmax åº”è¯¥æä¸å‡ºæ¥ã€‚</p>
<p>å€’æ˜¯æœ‰ä¸€ä¸ªæ£€æŸ¥åŠ ä¸€å‘ä¸Šæº¢å‡ºï¼ˆå‡è®¾æº¢å‡ºçš„è¡Œä¸ºå’Œæ— ç¬¦å·æ•´æ•°å·®ä¸å¤šï¼‰å–ååæ˜¯ä¸æ˜¯å’Œè‡ªå·±ç›¸ç­‰ï¼ˆ<code>~(x + 1) == x</code>ï¼‰çš„æƒ³æ³•ï¼Œä½†æ˜¯æœ‰ç¬¦å·æ•°æº¢å‡ºå¥½åƒæ˜¯ ub å•Šã€‚é¢˜ç›®ä¹Ÿæ²¡æœ‰è§„å®šæº¢å‡ºä¼šé‡‡ç”¨ä»€ä¹ˆæ–¹å¼ã€‚</p>
<p>å…ˆè¿™ä¹ˆåšå¥½äº†â€¦â€¦-1 è¦ç‰¹åˆ¤ä¸€ä¸‹å› ä¸º -1 å–ååŠ ä¸€åé©¬ä¸Šå°±æº¢å‡ºäº†ã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">isTmax</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> (!((~(x + <span class="number">1</span>)) ^ x)) &amp; (!!(x + <span class="number">1</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="allOddBits"><a href="#allOddBits" class="headerlink" title="allOddBits"></a>allOddBits</h3><p>åˆ¤æ–­ç»™å®š x çš„å¥‡æ•°äºŒè¿›åˆ¶ä½ä¸Šæ˜¯å¦å…¨ä¸º 1ã€‚</p>
<p>â€¦â€¦è¿™æ ·å—ï¼Ÿ</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">allOddBits</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> (x &gt;&gt; <span class="number">1</span>) &amp; (x &gt;&gt; <span class="number">3</span>) &amp; (x &gt;&gt; <span class="number">5</span>) &amp; (x &gt;&gt; <span class="number">7</span>) &amp; (x &gt;&gt; <span class="number">9</span>) &amp;</span><br><span class="line">  (x &gt;&gt; <span class="number">11</span>) &amp; (x &gt;&gt; <span class="number">13</span>) &amp; (x &gt;&gt; <span class="number">15</span>) &amp; (x &gt;&gt; <span class="number">17</span>) &amp; (x &gt;&gt; <span class="number">19</span>) &amp;</span><br><span class="line">  (x &gt;&gt; <span class="number">21</span>) &amp; (x &gt;&gt; <span class="number">23</span>) &amp; (x &gt;&gt; <span class="number">25</span>) &amp; (x &gt;&gt; <span class="number">27</span>) &amp; (x &gt;&gt; <span class="number">29</span>) &amp;</span><br><span class="line">  (x &gt;&gt; <span class="number">31</span>) &amp; <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æµ‹äº†ä¸€ä¸‹å‘ç°æ€§èƒ½åˆ†æ•°æ²¡æœ‰æ‹¿åˆ°ï¼Œæœ€å¤šåªèƒ½ä½¿ç”¨ 12 ä¸ªæ“ä½œç¬¦ï¼Œè€Œè¿™é‡Œç”¨äº† 33 ä¸ªã€‚è€ƒè™‘è¿›è¡Œä¼˜åŒ–ã€‚å› ä¸ºæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ 8 ä½æ•´æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è€ƒè™‘å°†è¾“å…¥çš„ä¸œè¥¿æ¯ 8 ä½ä¸ä¸€ä¸‹ï¼Œå†ç”¨ä¸€ä¸ªæ©ç æ£€æŸ¥å¾—åˆ°çš„ä¸œè¥¿å¥‡æ•°ä½ä¸Šæ˜¯å¦éƒ½ä¸º 1ã€‚è¿™æ ·å°±èƒ½å‡å°‘è®¡ç®—äº†ã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">allOddBits</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> !((x &amp; (x &gt;&gt; <span class="number">8</span>) &amp; (x &gt;&gt; <span class="number">16</span>) &amp; (x &gt;&gt; <span class="number">24</span>) &amp; <span class="number">0xaa</span>) ^ <span class="number">0xaa</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åªç”¨äº† 9 ä¸ªæ“ä½œç¬¦è€¶ï¼</p>
<h3 id="negate"><a href="#negate" class="headerlink" title="negate"></a>negate</h3><p>æ±‚ç»™å®šæ•°çš„ç›¸åæ•°ã€‚</p>
<p>è¿™ä¸ªå¯ä»¥ä½¿ç”¨æˆ‘ä»¬ç†ŸçŸ¥çš„å°ç»“è®ºï¼ŒæŠŠ x å–ååå†åŠ ä¸€ç›´æ¥å¾—åˆ°ç»“æœï¼Œéå¸¸ç®€å•ã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">negate</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> (~x) + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="isAsciiDigit"><a href="#isAsciiDigit" class="headerlink" title="isAsciiDigit"></a>isAsciiDigit</h3><p>åˆ¤æ–­ç»™å®šè¾“å…¥æ˜¯ä¸æ˜¯ ASCII ç¼–ç ä¸­çš„æ•°å­—ã€‚</p>
<p>æˆ‘ä»¬å·²ç»æœ‰äº†æ¯”è¾ƒä¸¤ä¸ªæ•°å­—æ˜¯å¦ç›¸ç­‰çš„ä¾¿åˆ©ç®—æ³•ï¼Œåªè¦æ‰“è¡¨æ£€æŸ¥æ˜¯å¦ç­‰äºæ¯ä¸ªå¯èƒ½çš„æ•°å­—ï¼Œå°†ç»“æœæˆ–èµ·æ¥å°±æ˜¯æœ€ç»ˆç­”æ¡ˆã€‚ä½†æ˜¯è¿™æ ·æ˜¾ç„¶æ˜¯æ‹¿ä¸åˆ°æ€§èƒ½åˆ†çš„å˜›ã€‚</p>
<p>å—¯â€¦â€¦å¦‚æœ x çš„æœ€é«˜ä½ä¸º 1ï¼Œé‚£å®ƒæ˜¯ä¸ªè´Ÿæ•°ï¼Œå°±ä¸æ˜¯ ASCII çš„æ•°å­—äº†ã€‚æ’é™¤è¿™ç§æƒ…å†µåï¼Œæ¥ä¸‹æ¥å°±åªè¦è€ƒè™‘æ­£æ•°æ¯”å¤§å°ã€‚</p>
<p><del>å‘ç°å¼‚æˆ–çš„ç»“æœçš„æœ€é«˜ä½æ˜¯ä¸¤ä¸ªæ•°å­—ç¬¬ä¸€ä¸ªä¸åŒä¹‹å¤„ï¼Œæ‰¾å‡ºè°æ˜¯ 1 è°å°±æ›´å¤§ã€‚é—®é¢˜å°±å˜æˆäº†å¦‚ä½•å–ä¸€ä¸ªæ•°çš„æœ€é«˜ä½ã€‚</del>å¹¶æ²¡æœ‰æƒ³åˆ°ä»€ä¹ˆå–ä¸€ä¸ªæ•°æœ€é«˜ä½çš„ä¾¿åˆ©ç®—æ³•â€¦â€¦</p>
<p>è€ƒè™‘åˆ©ç”¨ä¸€ä¸‹é¢˜ç›®ç‰¹æ€§ï¼ŒASCII çš„ 0 å’Œ 9 æ˜¯ 110000 å’Œ 111001ï¼Œæƒ³åˆ°æä¸€ä¸ªä¸œè¥¿æ¥æ£€æŸ¥ x çš„å‰é¢ 26 ä½æ˜¯å¦å…¨ä¸º 0ï¼Œè€Œä¸”ç¬¬ 5ã€6 ä½ä¸º 1ã€‚æ¥ç€å†åˆ¤æ–­åå››ä½æ˜¯å¦ç¬¦åˆç¬¬å››ä½ä¸º 0ï¼Œæˆ–è€…ç¬¬ 2ã€3 ä½ä¸ºé›¶â€¦â€¦</p>
<p>æŠ˜è…¾ä¸€ä¸‹å¾—åˆ°è¿™æ ·çš„ç­”æ¡ˆï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">isAsciiDigit</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> (!((~<span class="number">0x3f</span>) &amp; x)) &amp; (!((<span class="number">0x30</span> &amp; x) ^ <span class="number">0x30</span>)) &amp;</span><br><span class="line">	  (!(<span class="number">0x8</span> &amp; x) | (!(<span class="number">0x6</span> &amp; x)));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è½»æ¾è¿‡å…³</p>
<h3 id="conditional"><a href="#conditional" class="headerlink" title="conditional"></a>conditional</h3><p>å®ç°ç±»ä¼¼ä¸‰ç›®è¿ç®—ç¬¦çš„åŠŸèƒ½ã€‚</p>
<p>è¦å®ç° <code>x ? y : z</code> çš„è¯ï¼Œåº”è¯¥å¾ˆå®¹æ˜“æƒ³åˆ° <code>(!!x) * y + (!x) * z</code> è¿™ç§çš„â€¦â€¦ä½†æ˜¯æˆ‘ä»¬æ²¡æœ‰ä¹˜å·ã€‚å¯ä»¥æƒ³åˆ°ä½¿ç”¨ä¸å·æ›¿ä»£ä¸€ä¸‹ï¼Œå°±æ˜¯æƒ³åŠæ³•å¼„ä¸€ä¸ªæ©ç ï¼Œå½“ x ä¸ºçœŸæ—¶å®ƒæ˜¯å…¨ 1ï¼Œx ä¸ºå‡æ—¶å®ƒæ˜¯å…¨é›¶è¿™ç§çš„ã€‚æ„Ÿè§‰æ¯”è¾ƒç®€å•ã€‚</p>
<p>ä»£ç é‡Œä¸ºäº†èŠ‚çœç¬¦å·æŠŠæ©ç å¼„æˆå½“ x ä¸ºçœŸæ—¶æ˜¯å…¨ 0ï¼Œx ä¸ºå‡æ—¶æ˜¯å…¨ 1ã€‚ä½¿ç”¨æ–¹æ³•è¿˜æ˜¯å·®ä¸å¤šçš„å§ã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">conditional</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y, <span class="type">int</span> z)</span> &#123;</span><br><span class="line">  <span class="type">int</span> mask = !x;</span><br><span class="line">  mask = (mask &lt;&lt; <span class="number">1</span>) | mask;</span><br><span class="line">  mask = (mask &lt;&lt; <span class="number">2</span>) | mask;</span><br><span class="line">  mask = (mask &lt;&lt; <span class="number">4</span>) | mask;</span><br><span class="line">  mask = (mask &lt;&lt; <span class="number">8</span>) | mask;</span><br><span class="line">  mask = (mask &lt;&lt; <span class="number">16</span>) | mask;</span><br><span class="line">  <span class="keyword">return</span> ((~mask) &amp; y) | (mask &amp; z);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å†™åé¢çš„ howManyBits çš„æ—¶å€™è·å¾—äº†é‡å¤§æŠ€æœ¯é©æ–°ï¼Œç°åœ¨æœ‰ä¸€ç§ä¾¿åˆ©æ“ä½œæ¥ç”Ÿæˆæ©ç äº†ï¼</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">conditional</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y, <span class="type">int</span> z)</span> &#123;</span><br><span class="line">  <span class="type">int</span> mask = (~(!x)) + <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">return</span> ((~mask) &amp; y) | (mask &amp; z);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœ x æ˜¯ 0ï¼Œåˆ™ <code>~(!x)</code> ä½æ¨¡å¼ä¸º 1111â€¦1110ï¼ŒåŠ  1 ååˆšå¥½æ˜¯å…¨ 1ã€‚</p>
<p>å¦‚æœ x æ˜¯ 1ï¼Œåˆ™ <code>~(!x)</code> ä½æ¨¡å¼ä¸º 1111â€¦1111ï¼ŒåŠ  1 å‘ä¸Šæº¢å‡ºååˆšå¥½æ˜¯å…¨ 0ã€‚</p>
<h3 id="isLessOrEqual"><a href="#isLessOrEqual" class="headerlink" title="isLessOrEqual"></a>isLessOrEqual</h3><p>åˆ¤æ–­ç»™å®šçš„ä¸¤ä¸ªæ•°æ˜¯å¦æ»¡è¶³å°äºç­‰äºå…³ç³»ã€‚</p>
<p>å°äºç­‰äºå°±æ˜¯ä¸å¤§äºå˜›ï¼Œæ¥ä¸‹æ¥è€ƒè™‘åˆ¤æ–­ä¸¤ä¸ªæ•°çš„å¤§äºå…³ç³»ã€‚</p>
<p><del>è¿™ä¸ªå¥½åƒåœ¨ isAsciiDigit é‚£ä¸ªé¢˜é‡Œçš„è¸©è¿‡ä¸€æ¬¡ï¼Œæ‰€ä»¥æ¥ç€æ€è·¯å¾€ä¸‹æƒ³â€¦â€¦å¦‚ä½•å–ä¸€ä¸ªæ•°çš„æœ€é«˜ä½ã€‚</del>å‘ç°å–æœ€é«˜ä½çš„è¯æ€ä¹ˆå†™éƒ½ä¼šæ‹¿ä¸å®Œæ€§èƒ½åˆ†ã€‚</p>
<p>çªç„¶æƒ³åˆ°å¥½åƒä¸¤ä¸ªæ•°ç›¸å‡ä¸€ä¸‹å†åˆ¤æ–­ç»“æœæ˜¯å¦ä¸ºæ­£æ•°å°±è¡Œï¼ŒåŸæ¥åˆšåˆšæƒ³é‚£ä¹ˆå¤šæ˜¯è„‘å­æ‰“ç»“äº†ã€‚</p>
<p>å…ˆåˆ¤æ–­ä¸¤ä¸ªæ•°æ˜¯å¦æ­£å¥½ä¸ºä¸€æ­£ä¸€è´Ÿï¼Œå¦‚æœæ˜¯çš„è¯å¯ä»¥ç›´æ¥ç»™ç»“æœã€‚å¦åˆ™ç›¸å‡åˆ¤æ–­ç»“æœæ­£è´Ÿï¼Œè¿™æ—¶ä¸¤ä¸ªåŒå·çš„æ•°ç›¸å‡å¿…ä¸å¯èƒ½æº¢å‡ºã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">isLessOrEqual</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> (((x &gt;&gt; <span class="number">31</span>) &amp; <span class="number">1</span>) | (!(y &gt;&gt; <span class="number">31</span>))) &amp;</span><br><span class="line">	  ((((x &gt;&gt; <span class="number">31</span>) &amp; <span class="number">1</span>) &amp; (!(y &gt;&gt; <span class="number">31</span>))) | (!((y + (~x) + <span class="number">1</span>) &gt;&gt; <span class="number">31</span>)));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ‹¿ä¸‹ã€‚</p>
<h3 id="logicalNeg"><a href="#logicalNeg" class="headerlink" title="logicalNeg"></a>logicalNeg</h3><p>å®ç°é€»è¾‘éï¼Œä¸èƒ½ä½¿ç”¨æ„Ÿå¹å·ã€‚</p>
<p>æ„Ÿè§‰å’Œ allOddBits å¾ˆåƒï¼åªä¸è¿‡é‚£ä¸ªæ˜¯æ±‚å¥‡æ•°ä½ä¸Šå…¨ä¸º 1ï¼Œè¿™é‡Œæ˜¯æ±‚å­˜åœ¨æŸä¸€ä½ä¸º 1ã€‚</p>
<p>ç”¨ç±»ä¼¼çš„æ–¹æ³•å®ç°ä¸€ä¸‹å°±å¥½å•¦ã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">logicalNeg</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">  x = x | (x &gt;&gt; <span class="number">16</span>);</span><br><span class="line">  x = x | (x &gt;&gt; <span class="number">8</span>);</span><br><span class="line">  x = x | (x &gt;&gt; <span class="number">4</span>);</span><br><span class="line">  x = x | (x &gt;&gt; <span class="number">2</span>);</span><br><span class="line">  x = x | (x &gt;&gt; <span class="number">1</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="number">1</span> ^ (x &amp; <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æœ€å return é‚£ä¸ªå¥‡æ€ªçš„è¡¨è¾¾å¼å…¶å®æ˜¯ <code>1 - x</code> æ‹†è¿‡æ¥çš„ã€‚å‘ç°ç›´æ¥å†™ <code>2 + (~x)</code> ä¼šæ‹¿ä¸åˆ°æ€§èƒ½åˆ†ï¼Œç¬¦å·åˆšå¥½å¤šä¸€ä¸ªã€‚</p>
<h3 id="howManyBits"><a href="#howManyBits" class="headerlink" title="howManyBits"></a>howManyBits</h3><p>æ±‚æœ€å°‘ç”¨å¤šå°‘ä¸ªä½å¯ä»¥è¡¨ç¤ºå‡ºç»™å®šæ•°å­—ã€‚</p>
<p>å…¶å®å°±æ˜¯ $\log_{2}$ å•¦ã€‚</p>
<p>å…ˆå‡å®š x æ˜¯è´Ÿæ•°ï¼Œæ ¹æ®è¡¥ç è¡¨ç¤ºæ³•æˆ‘ä»¬éœ€è¦èƒ½å¤Ÿè¡¨ç¤º $[ x, -x - 1 ]$ çš„æ‰€æœ‰æ•°ã€‚å…¨éƒ¨å½“æˆæ— ç¬¦å·æ•´æ•°ä¹‹åéœ€è¦è¡¨ç¤ºçš„èŒƒå›´æ˜¯ $[0, ((<del>x) &lt;&lt; 1) + 1]$ï¼Œåªè¦æˆ‘ä»¬èƒ½å¤Ÿç”¨ä¸€äº›ä½è¡¨ç¤ºå‡ºæœ€å¤§çš„æ•°ï¼Œé‚£ä¹ˆè¿™äº›ä½ä¸€å®šå¯ä»¥è¡¨ç¤ºå‡ºæ‰€æœ‰æ•°ã€‚å› æ­¤ç­”æ¡ˆå°±æ˜¯ $\log_{2}(((</del>x) &lt;&lt; 1) + 1)$ï¼ˆå‘ä¸Šå–æ•´ï¼‰ã€‚</p>
<p>åŒç†ï¼Œå¦‚æœ x æ˜¯æ­£æ•°ï¼Œåˆ™éœ€è¦èƒ½å¤Ÿè¡¨ç¤º $[ -x - 1, x ]$ çš„æ‰€æœ‰æ•°ï¼Œç­”æ¡ˆæ˜¯ $\log_{2}((x &lt;&lt; 1) + 1)$ã€‚</p>
<p>è‡³äºå¦‚ä½•å–å¯¹æ•°â€¦â€¦çŒœæµ‹æ˜¯è¦ä½¿ç”¨ç±»ä¼¼ logicalNeg å’Œ allOddBits é‚£æ ·ç±»ä¼¼åˆ†æ²»ï¼ˆï¼Ÿï¼‰çš„åšæ³•æ¥å®Œæˆï¼Œå…ˆè€ƒè™‘åˆ†æˆä¸¤åŠçš„æƒ…å½¢ï¼šå¦‚æœé«˜ 16 ä½ä¸ä¸ºé›¶ï¼Œå¯ä»¥ç»™ç­”æ¡ˆåŠ ä¸Š 16ï¼Œæ¥ç€å†æŠŠé«˜ 16 ä½ç§»åŠ¨åˆ°ä½ 16 ä½ï¼ŒæŒ‰ç…§ç±»ä¼¼çš„æ–¹å¼å¤„ç†ä½ 16 ä½ï¼›å¦‚æœé«˜ 16 ä½ä¸ºé›¶ï¼Œåˆ™ç›´æ¥å¤„ç†ä½ 16 ä½ã€‚ä¾æ¬¡ç±»æ¨ç›´åˆ°å¤„ç†å®Œåªå‰©ä¸€ä½çš„æƒ…å†µã€‚</p>
<p>ç”¨åŠ›å®ç°ä¸€ä¸‹å°±å¥½äº†ã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">howManyBits</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">  <span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">  <span class="type">int</span> h16, h8, h4, h2, h1, h0;</span><br><span class="line">  <span class="type">int</span> sign = x &gt;&gt; <span class="number">31</span>;</span><br><span class="line">  <span class="type">int</span> range = (((x &amp; (~sign)) | ((~x) &amp; sign)) &lt;&lt; <span class="number">1</span>) + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">  h16 = (~(!!(range &gt;&gt; <span class="number">16</span>))) + <span class="number">1</span>;</span><br><span class="line">  ans = ans + (h16 &amp; <span class="number">16</span>);</span><br><span class="line">  range = range &gt;&gt; (h16 &amp; <span class="number">16</span>);</span><br><span class="line"></span><br><span class="line">  h8 = (~(!!((range &gt;&gt; <span class="number">8</span>) &amp; <span class="number">0xff</span>))) + <span class="number">1</span>;</span><br><span class="line">  ans = ans + (h8 &amp; <span class="number">8</span>);</span><br><span class="line">  range = range &gt;&gt; (h8 &amp; <span class="number">8</span>);</span><br><span class="line"></span><br><span class="line">  h4 = (~(!!((range &gt;&gt; <span class="number">4</span>) &amp; <span class="number">0xf</span>))) + <span class="number">1</span>;</span><br><span class="line">  ans = ans + (h4 &amp; <span class="number">4</span>);</span><br><span class="line">  range = range &gt;&gt; (h4 &amp; <span class="number">4</span>);</span><br><span class="line"></span><br><span class="line">  h2 = (~(!!((range &gt;&gt; <span class="number">2</span>) &amp; <span class="number">0x3</span>))) + <span class="number">1</span>;</span><br><span class="line">  ans = ans + (h2 &amp; <span class="number">2</span>);</span><br><span class="line">  range = range &gt;&gt; (h2 &amp; <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">  h1 = (~(!!((range &gt;&gt; <span class="number">1</span>) &amp; <span class="number">0x1</span>))) + <span class="number">1</span>;</span><br><span class="line">  ans = ans + (h1 &amp; <span class="number">1</span>);</span><br><span class="line">  range = range &gt;&gt; (h1 &amp; <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">  h0 = (~(range &amp; <span class="number">0x1</span>)) + <span class="number">1</span>;</span><br><span class="line">  ans = ans + (h0 &amp; <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>çœŸä¸å®¹æ˜“ï¼</p>


                    
                        <div class="pt3">
                            <span class="ec pr2">ğŸ•—</span>2023-10-01
                        </div>
                    
                    <!-- Tags Bottom -->
                    

                    <!-- Comments -->
                    

                </div>
            </div>
        </div>
    </div>
</div>


<!-- Footer -->
<footer class="bg-1 ph2 ph5-ns pv5 center tc">
    
</footer>


</body>

</html>